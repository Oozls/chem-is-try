{% extends "base.html" %}

{% block content %}
<div class="detail-container">
    <div class="compact-header">
        <div class="title-row">
            <h2>{{ reagent.name }}</h2>
            <span class="badge category">{{ reagent.category }}</span>
            {% if reagent.misc == 'ë…ê·¹ë¬¼' %}
                <span class="badge danger">ë…ê·¹ë¬¼</span>
            {% endif %}
        </div>
        <div class="meta-info">
            <span>ID: {{ reagent._id }}</span>
        </div>
    </div>

    <div class="summary-bar">
        <div class="summary-item">
            <span class="label">ìœ„ì¹˜</span>
            <span class="value">{{ reagent.location }}ë²ˆ ì‹œì•½ì¥</span>
        </div>
        <div class="divider"></div>
        <div class="summary-item">
            <span class="label">ìˆ˜ëŸ‰</span>
            <span class="value">{{ reagent.amount }}</span>
        </div>
        <div class="divider"></div>
        <div class="summary-item">
            <span class="label">ì”ëŸ‰</span>
            <span class="value highlight">{{ reagent.left_amount }}</span>
        </div>
        <div class="divider"></div>
        <div class="summary-item">
            <span class="label">ë¹„ê³ </span>
            <span class="value">{{ reagent.misc if reagent.misc else '-' }}</span>
        </div>
        <div class="divider"></div>
        <div class="summary-item" style="max-width: 200px; overflow: auto;">
            <span class="label">Cas No.</span>
            <span class="value" style="letter-spacing: -1px;">
                {% if reagent.cas %}
                    {{ reagent.cas.cas if reagent.cas.cas else reagent.cas.message }}
                {% else %}
                -
                {% endif %}
            </span>
        </div>
    </div>

    <div class="custom-content-area">
        <h3>ğŸ“‹ ìƒì„¸ ì •ë³´ &#40;GHS ê²½ê³ í‘œì§€&#41;</h3>
        <div class="custom-body">
            {% if reagent.ghs %}
                <span>{{ reagent.ghs.message if reagent.ghs.message }}</span>
                <div>
                    {% if reagent.ghs.pictograms %}
                        {% for img in reagent.ghs.pictograms %}
                            <img src="{{ img }}" style="width: 5rem;" alt="">
                        {% endfor %}
                    {% endif %}
                </div>
                {% if reagent.ghs.hazard_statements %}
                    {% for msg in reagent.ghs.hazard_statements %}
                        <span>{{ msg }}</span>
                    {% endfor %}
                {% endif %}
            {% else %}
                <p style="color: #888;">ë“±ë¡ëœ ì¶”ê°€ ìƒì„¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
            {% endif %}
            {% if reagent.cid %}
            <a href="https://pubchem.ncbi.nlm.nih.gov/compound/{{ reagent.cid }}" class="pubchem-link" target="_blank">ë¯¸êµ­ êµ­ë¦½ ì˜í•™ ë„ì„œê´€ PubChem â†µ</a>
            {% endif %}
        </div>
    </div>

    <div class="form-actions" style="margin-top: 30px; justify-content: flex-end;">
        <a href="/search" class="btn-secondary" style="text-decoration: none;">ëª©ë¡</a>
        
        {% if current_user.is_authenticated and current_user.is_admin() %}
            <a href="/edit/{{ reagent._id }}" class="btn-primary" style="text-decoration: none;">ìˆ˜ì •</a>
            <a href="/delete/{{ reagent._id }}" class="btn-danger" style="text-decoration: none;">ì‚­ì œ</a>
        {% endif %}
    </div>
</div>
{% endblock %}