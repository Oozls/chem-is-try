{% extends "base.html" %}

{% block content %}
<h2>ğŸ§ª ì‹œì•½ ìƒì„¸ ê²€ìƒ‰</h2>

<form action="/search" method="GET" class="search-form">
    
    <div class="form-group">
        <label for="name">ì‹œì•½ ì´ë¦„&#40;í•œê¸€ëª…, ì˜ë¬¸ëª…, í™”í•™ì‹&#41;</label>
        <input type="text" id="name" name="name" autocomplete="off">
    </div>

    <div class="form-group">
        <label for="category">êµ¬ë¶„</label>
        <select id="category" name="category">
            <option value="all">ì „ì²´</option>
            <option value=""></option>
            <option value="ìœ ê¸°ë¬¼">ìœ ê¸°ë¬¼</option>
            <option value="ë¬´ê¸°ë¬¼">ë¬´ê¸°ë¬¼</option>
        </select>
    </div>

    <div class="form-group">
        <label for="location">ë°€í ì‹œì•½ì¥ ìœ„ì¹˜</label>
        <select id="location" name="location">
            <option value="all">ì „ì²´ ìœ„ì¹˜</option>
            {% for i in range(1, 9) %}
            <option value="{{ i }}">{{ i }}ë²ˆ ì‹œì•½ì¥</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label for="misc">ë¹„ê³ </label>
        <select id="misc" name="misc">
            <option value="all">ì „ì²´</option>
            <option value=""></option>
            <option value="ë…ê·¹ë¬¼">ë…ê·¹ë¬¼</option>
        </select>
    </div>

    <div class="form-group">
        <label for="amount">ìˆ˜ëŸ‰</label>
        <input type="number" id="amount" name="amount" autocomplete="off">
    </div>

    <div class="form-group">
        <label for="left_amount">ì”ëŸ‰</label>
        <input type="text" id="left_amount" name="left_amount" autocomplete="off">
    </div>

    <div class="search-btn-container">
        <button type="submit">ğŸ” ê²€ìƒ‰í•˜ê¸°</button>
    </div>
</form>

<hr style="margin: 40px 0; border: 0; border-top: 2px dashed #ddd;">

<h3>ê²€ìƒ‰ ê²°ê³¼</h3>
<span class="standard">ì´ë¦„ì„ í´ë¦­í•˜ì—¬ ìì„¸í•œ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
<table>
    <thead>
        <tr>
            <th>ì´ë¦„</th>
            <th>êµ¬ë¶„</th>
            <th>ìˆ˜ëŸ‰</th>
            <th>ì”ëŸ‰</th>
            <th>ë°€í ì‹œì•½ì¥ ë²ˆí˜¸</th>
            <th>ë¹„ê³ </th>
            {% if current_user.is_authenticated %}
            {% if current_user.is_admin() %}
            <th>ìˆ˜ì •</th>
            {% endif %}
            {% endif %}
        </tr>
    </thead>
    <tbody>
        {% if reagents %}
            {% for item in reagents %}
            <tr>
                <td style="font-weight: bold;">
                    <a href="/reagent/detail/{{ item._id }}" class="rg-name">{{ item.name }}</a>
                    {% if item.cid and current_user.is_authenticated %}
                    {% if current_user.is_admin() %}
                    <br/><span style="font-size: 0.8rem; color: #777; font-weight: 400;">CID: {{ item.cid }}</span>
                    {% endif %}
                {% endif %}
                </td>
                
                <td>{{ item.category }}</td>
                
                <td>{{ item.amount }}</td>
                
                <td>{{ item.left_amount }}</td>
                
                <td>
                    {{ item.location }}
                </td>
                
                <td>
                    {% if item.misc == 'ë…ê·¹ë¬¼' %}
                        <span style="color: #d9534f; font-weight: bold;">ë…ê·¹ë¬¼</span>
                    {% else %}
                        <span style="color: #888;">-</span>
                    {% endif %}
                </td>

                {% if current_user.is_authenticated %}
                {% if current_user.is_admin() %}
                <td>
                    <a href="/reagent/edit/{{ item._id }}" style="text-decoration: none;">âœï¸</a>
                </td>
                {% endif %}
                {% endif %}
            </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan="6" style="text-align: center; padding: 30px; color: #666;">
                    ì¡°ê±´ì— ë§ëŠ” ì‹œì•½ì´ ì—†ê±°ë‚˜ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
                </td>
            </tr>
        {% endif %}
    </tbody>
</table>
{% endblock %}